
# Лабораторный отчёт – День 10


**ФИО:** Гул Керим Аллалович
 
**Дата выполнения:** 14.06.2025

**Преподаватель:** Виталий Новиков 


---

## 1. Тема и цель работы

**Тема:** Проведение MITM-атаки в локальной сети.

**Цели работы:**

- Изучить теоретические основы MITM и механизм ARP-спуфинга.
- Получить практические навыки использования утилиты bettercap для проведения ARP-спуфинга и перенаправления трафика.
- Научиться перехватывать и анализировать незашифрованный HTTP-трафик для извлечения аутентификационных данных (cookie, логин/пароль).
- Зафиксировать результаты атаки путем сохранения перехваченного трафика (pcap) и скриншотов.

---

## 2. Теоретическая часть


*   **MITM (Man-in-the-Middle) Attack:** Атака, при которой злоумышленник тайно ретранслирует и, возможно, изменяет коммуникацию между двумя сторонами, которые считают, что они напрямую общаются друг с другом.
*   **ARP (Address Resolution Protocol):** Протокол для сопоставления IP-адреса (логического адреса 3-го уровня) с MAC-адресом (физическим адресом 2-го уровня) в локальной сети.
*   **ARP Spoofing / ARP Poisoning:** Техника атаки, при которой злоумышленник отправляет поддельные ARP-сообщения в локальную сеть. Это позволяет связать MAC-адрес атакующего с IP-адресом другого узла (например, шлюза), заставляя трафик идти через машину атакующего.
*   **Bettercap:** Мощный, модульный и портативный фреймворк для проведения различных видов MITM-атак, сканирования сетей и мониторинга трафика.
*   **HTTP (HyperText Transfer Protocol):** Протокол прикладного уровня, используемый для передачи веб-страниц. Данные, включая пароли и cookie, передаются в незашифрованном, открытом виде.
*   **Cookie:** Небольшой фрагмент данных, отправленный веб-сервером и хранимый на компьютере пользователя. Часто используется для аутентификации и отслеживания состояния сессии.

---

### 3. Ход работы

Для выполнения задачи была проведена MITM-атака типа ARP-спуфинг с целью перехвата HTTP-трафика между хостом-жертвой (`192.168.1.59`) и шлюзом (`192.168.1.1`). В качестве основного инструмента использовался фреймворк `bettercap`, который был сразу запущен в режиме записи всего перехваченного трафика в pcap-файл.

#### 3.1. Используемые команды

**1. Запуск Bettercap с записью в файл:**

`Bettercap` был запущен с опцией `-pcap` для автоматического сохранения всей сетевой сессии в файл `day10_cookie.pcap`.

```bash
sudo bettercap -iface eth0 -pcap day10_cookie.pcap
```

**2. Настройка атаки в интерактивной консоли:**

После запуска, в интерактивном режиме `bettercap`, были заданы цель для ARP-спуфинга и включены модули перехвата трафика.

```bash
set arp.spoof.targets 192.168.1.59
arp.spoof on
net.sniff on
```

#### 3.2. Скриншоты и захват трафика

После запуска атаки на машине-жертве был выполнен вход на тестовый веб-сайт `http://testphp.vulnweb.com`. В результате `bettercap` успешно перехватил HTTP POST-запрос, содержащий аутентификационные данные в открытом виде.

На скриншоте ниже виден перехваченный логин (`uname=login`) и пароль (`pass=parol2222888`).

![Перехват логина и пароля](https://raw.githubusercontent.com/Nelass1c/practica-konvey/main/day10/bettercap/steal_parol.jpg)


Весь трафик, включая перехваченные HTTP-запросы, был автоматически сохранен в pcap-файл в ходе выполнения атаки.

*   **Файл захвата трафика:** [`day10_cookie.pcap`](https://raw.githubusercontent.com/Nelass1c/practica-konvey/main/day10/bettercap/day10_cookie.pcap)

---

### 4. Результаты

*   Успешно проведена MITM-атака на хост `192.168.1.59` в локальной сети с использованием утилиты `bettercap` и техники ARP-спуфинга.
*   Был перехвачен незашифрованный HTTP POST-запрос, отправленный жертвой на сайт `http://testphp.vulnweb.com`.
*   Из тела перехваченного запроса были извлечены аутентификационные данные в открытом виде: логин (`uname`) и пароль (`pass`).
*   В качестве доказательства успешной атаки были сохранены скриншот с выводом `bettercap` и pcap-файл с полным дампом перехваченного трафика.

---

### 5. Выводы

*   **Закреплены навыки:** Получен практический опыт проведения MITM-атаки с помощью `bettercap`. Наглядно продемонстрирована опасность ARP-спуфинга и уязвимость передачи данных по незашифрованному протоколу HTTP. Закреплено понимание важности использования HTTPS для защиты данных.

*   **Что показалось сложным:** Подбор правильного синтаксиса команд `bettercap` для одновременного запуска атаки и записи трафика в файл потребовал нескольких попыток.

*   **Какой инструмент был наиболее полезен:** Ключевым инструментом выступил `bettercap`, который позволил автоматизировать и значительно упростить сложный процесс ARP-спуфинга и перехвата трафика с помощью модулей `arp.spoof` и `net.sniff`.

---