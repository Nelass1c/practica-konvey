
# Лабораторный отчёт – День 15


**ФИО:** Гул Керим Аллалович
 
**Дата выполнения:** 18.06.2025

**Преподаватель:** Виталий Новиков 


---

## 1. Тема и цель работы

**Тема:** Комплексный анализ безопасности уязвимой системы

**Цели работы:**

- Провести комплексный анализ безопасности предумышленно уязвимой виртуальной машины Metasploitable 2.
- Применить на практике инструменты сетевого сканирования (Nmap), перехвата трафика (Wireshark/tcpdump) и проведения атак "человек-посередине" (bettercap).
- Продемонстрировать реальные риски использования устаревшего ПО и незашифрованных протоколов передачи данных.

---

## 2. Теоретическая часть

*   **Metasploitable 2:** Специально созданный дистрибутив Linux, содержащий множество известных уязвимостей, предназначенный для обучения и тестирования инструментов безопасности.
*   **Nmap:** Инструмент для сканирования сетей, обнаружения хостов и определения открытых портов, служб и их версий.
*   **Bettercap:** Мощный фреймворк для проведения атак "человек-посередине" (MITM), способный выполнять ARP-спуфинг, DNS-спуфинг, перехват трафика и многое другое.
*   **ARP-спуфинг (ARP Poisoning):** Атака на канальном уровне, при которой атакующий отправляет поддельные ARP-сообщения в локальную сеть, чтобы связать свой MAC-адрес с IP-адресом другого узла (например, шлюза), заставляя трафик идти через себя.
*   **MITM (Man-in-the-Middle):** Тип атаки, при которой злоумышленник тайно ретранслирует и, возможно, изменяет коммуникацию между двумя сторонами, которые считают, что они общаются друг с другом напрямую.
*   **Wireshark / tcpdump:** Сетевые анализаторы ("снифферы"), позволяющие захватывать и детально просматривать сетевой трафик, проходящий через сетевой интерфейс.
*   **Незашифрованные протоколы (Telnet, FTP, HTTP):** Протоколы, передающие данные, включая учетные записи, в открытом текстовом виде, что делает их крайне уязвимыми для перехвата.

---

### 3. Ход работы

Для комплексного анализа безопасности была выбрана предумышленно уязвимая виртуальная машина **Metasploitable 2**. Атакующая машина **Kali Linux** и цель были размещены в одной локальной сети в режиме "Сетевого моста" для обеспечения взаимодействия. Анализ проводился в три этапа: подготовка среды, разведка сети, атака "человек-посередине" и перехват трафика.

#### 3.1. Подготовка лабораторной среды

Первым шагом было получение IP-адреса целевой машины Metasploitable 2 с помощью команды `ifconfig`. Был получен адрес `192.168.1.43`.

![IP-адрес Metasploitable 2](https://raw.githubusercontent.com/Nelass1c/practica-konvey/main/day15/screenshots/metasploitable_ip.jpg)

#### 3.2. Разведка и атака "Человек-посередине" (MITM)

Для обнаружения хостов в сети и их дальнейшего анализа использовался фреймворк Bettercap. Были определены все активные устройства в локальной сети, включая машину Kali (`192.168.1.49`) и цель Metasploitable (`192.168.1.43`).

![Обнаружение хостов в сети с помощью bettercap](https://raw.githubusercontent.com/Nelass1c/practica-konvey/main/day15/screenshots/network.jpg)

Затем был запущен модуль ARP-спуфинга (`arp.spoof on`) и сниффер (`net.sniff on`). Для генерации трафика на целевой машине была выполнена команда `curl google.com`. Bettercap успешно перехватил и отобразил DNS-трафик от цели, что подтвердило успешность проведения атаки "человек-посередине" и перенаправления трафика.

![Bettercap](https://raw.githubusercontent.com/Nelass1c/practica-konvey/main/day15/screenshots/bettercap.png)

#### 3.3. Перехват учетных данных

Для демонстрации уязвимости незашифрованных протоколов, параллельно с атакой Bettercap, был запущен `tcpdump` для захвата трафика. Во время FTP-аутентификации на Metasploitable `tcpdump` успешно перехватил и отобразил в открытом виде логин (`USER msfadmin`) и пароль (`PASS msfadmin`).

![Перехват FTP-аутентификации, часть 1](https://raw.githubusercontent.com/Nelass1c/practica-konvey/main/day15/screenshots/tcpdump1.jpg)
![Перехват FTP-аутентификации, часть 2](https://raw.githubusercontent.com/Nelass1c/practica-konvey/main/day15/screenshots/tcpdump2.jpg)

Этот шаг наглядно продемонстрировал возможность получения несанкционированного доступа к учетным данным при использовании небезопасных протоколов в условиях атаки "человек-посередине".

---

## 4. Результаты

Тестирование сети подтвердило корректную работу настроенных списков контроля доступа (ACL):
- **Тест ICMP:** Попытка `ping` с компьютера `PC0` (192.168.10.2) на сервер `Server0` (192.168.10.162) была неуспешной (`Destination host unreachable`). Это подтверждает работу правила в `ICMP_FILTER`, запрещающего ICMP-трафик из пользовательской сети в серверную. При этом `ping` из IT-сети проходил успешно.
- **Тест HTTP:** Доступ к веб-серверу `Server0` по адресу `http://192.168.10.162` был успешно получен как с `PC0` (пользователи), так и с `PC1` (IT-отдел). Это подтверждает работу правил в `HTTP_ACCESS`.
- **Тест SSH:** Попытка подключения по SSH к серверу `Server0` с `PC0` (пользователи) была заблокирована. Попытка с `PC1` (IT-отдел) была разрешена на уровне маршрутизатора, что доказывает работу `SSH_ACCESS`.

---

## 5. Выводы

- **Какие знания были закреплены?** Были закреплены практические навыки по созданию сегментированных сетей с помощью VLSM. Углублено понимание принципов работы расширенных ACL, включая применение правил на вход (`in`) и выход (`out`) интерфейса для фильтрации трафика по протоколам и адресам источника/назначения.
- **Что показалось сложным?** Наиболее требующим внимания моментом было определение корректного направления (`in` или `out`) для применения ACL, так как от этого напрямую зависит логика и эффективность работы фильтра.
- **Какой инструмент был наиболее полезен?** Наиболее полезным инструментом оказался симулятор **Cisco Packet Tracer**, который позволил без реального оборудования построить, настроить и, что самое главное, протестировать всю сетевую инфраструктуру и политики безопасности в виртуальной среде.

---
